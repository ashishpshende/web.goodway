"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9208],{9208:(G,f,a)=>{a.r(f),a.d(f,{UpdateUserProfilePageModule:()=>b});var S=a(6814),m=a(6223),o=a(878),g=a(6800),v=a(5861),h=a(9421),d=a(7084),e=a(9212),p=a(7346),P=a(8378),E=a(6530),A=a(643),M=a(3864),U=a(9864);const T=[{path:"",component:(()=>{var r;class n{constructor(t,s,i,l,u,C,O,L){this.navCtrl=t,this.localStorageService=s,this.loadingCtrl=i,this.userService=l,this.alertController=u,this.languageService=C,this.router=O,this.loaderService=L,this.enableSave=!1,this.genders=[],this.roles=[],this.statuses=[],this.emailValidationMessage="",this.phoneNumberValidationMessage="",this.genders=["Male","Female","Others"],this.roles=["SuperAdmin","Admin","User"],this.statuses=["Active","InActive","Suspended"],this.user=null!=this.userService.selectedUser&&null!=this.userService.selectedUser?this.userService.selectedUser:new h.n(JSON.parse("{}"))}ngAfterViewInit(){this.user=this.localStorageService.StoredPreference.LoggedInUser}CancelUpdate(){this.userService.selectedUser=this.user;let t={queryParams:{ts:(new Date).getMilliseconds()}};this.router.navigate(["view-user-profile"],t)}GoToHomePage(){this.userService.selectedUser=this.user;let t={queryParams:{ts:(new Date).getMilliseconds()}};this.router.navigate(["home","dashboard"],t)}emailTextChanged(){this.validate()}phoneNumberTextChanged(){this.validate()}validate(){return d.W.validateEmail(this.user.email)&&d.W.validateMobileNumber(this.user.phoneNumber)?(this.enableSave=!0,this.emailValidationMessage="",this.phoneNumberValidationMessage="",!0):(this.enableSave=!1,d.W.validateEmail(this.user.email)?(this.emailValidationMessage="",d.W.validateMobileNumber(this.user.phoneNumber)?(this.phoneNumberValidationMessage="",!1):(this.phoneNumberValidationMessage=this.languageService.translate("USER_PROFILE.PHONE_SYNTAX_VALIDATING_MESSAGE"),!1)):(this.emailValidationMessage=this.languageService.translate("USER_PROFILE.EMAIL_SYNTAX_VALIDATING_MESSAGE"),!1))}UpdateButtonClicked(){this.userService.Validate(this.user)?this.checkEmailExistance(()=>{this.presentAlert(this.languageService.translate("SIGN_UP.ALREADY_REGISTERED"),this.languageService.translate("SIGN_UP.USER_WITH_EMAIL_ALREADY_EXISTS"))},()=>{this.checkUserNameExistance(()=>{this.presentAlert(this.languageService.translate("SIGN_UP.ALREADY_REGISTERED"),this.languageService.translate("SIGN_UP.USER_WITH_USERNAME_ALREADY_EXISTS"))},()=>{this.UpdateUser(()=>{},()=>{this.presentAlert(this.languageService.translate("SIGN_UP.REGISTRATION_FAILED"),this.languageService.translate("SIGN_UP.REGISTRATION_FAILED_MESSAGE"))})})}):this.presentAlert(this.languageService.translate("SIGN_UP.EMPTY_DETAILS"),this.languageService.translate("SIGN_UP.EMPTY_DETAILS_MESSAGE"))}checkEmailExistance(t,s){this.loaderService.customLoader("Checking for Email...",1e4),this.userService.readByEmail(this.user.email,i=>{this.loaderService.dismissLoader(),i.length>1?t(new h.n(i[0])):s()},()=>{this.loaderService.dismissLoader(),s()})}checkUserNameExistance(t,s){this.loaderService.customLoader("Checking for User Name...",1e4),this.userService.readByUserName(this.user.userName,i=>{this.loaderService.dismissLoader();var l=0;i.length>1?(i.forEach(u=>{this.user.userName===u.userName&&l++}),l>1?t(new h.n(i[0])):s()):s()},()=>{this.loaderService.dismissLoader(),s()})}UpdateUser(t,s){this.loaderService.customLoader("Saving User...",1e4),this.user.updatedOn=(0,S.p6)(new Date,"dd-MM-yyyy hh:mm:ss","en-US","+0530"),this.userService.UpdateUserProfile(this.user,()=>{this.loaderService.dismissLoader(),this.GoToHomePage()},()=>{this.loaderService.dismissLoader()})}presentAlert(t=this.languageService.translate("SIGN_UP.TITLE"),s=this.languageService.translate("SIGN_UP.REGISTRATION_FAILED")){var i=this;return(0,v.Z)(function*(){const l=yield i.alertController.create({cssClass:"app-alert-class",header:t,subHeader:"",message:s,buttons:[i.languageService.translate("BUTTONS.OK")]});yield l.present(),yield l.onDidDismiss()})()}}return(r=n).\u0275fac=function(t){return new(t||r)(e.Y36(p.SH),e.Y36(P.n),e.Y36(o.HT),e.Y36(E.K),e.Y36(o.Br),e.Y36(A.T),e.Y36(g.F0),e.Y36(M.D))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-update-user-profile"]],decls:17,vars:10,consts:[["id","TitleToolbar",1,"text-center"],["slot","start"],["expand","block",3,"click"],["slot","start","name","close"],["expand","block",3,"disabled","click"],["slot","start","name","save"]],template:function(t,s){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e._UZ(7,"ion-content"),e.TgZ(8,"ion-footer")(9,"ion-button",2),e.NdJ("click",function(){return s.CancelUpdate()}),e._UZ(10,"ion-icon",3),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"ion-button",4),e.NdJ("click",function(){return s.UpdateButtonClicked()}),e._UZ(14,"ion-icon",5),e._uU(15),e.ALo(16,"translate"),e.qZA()()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,4,"USER_PROFILE.PAGE_TITLE")),e.xp6(6),e.hij(" ",e.lcZ(12,6,"BUTTONS.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!s.enableSave),e.xp6(2),e.hij(" ",e.lcZ(16,8,"BUTTONS.SAVE")," "))},dependencies:[o.YG,o.Sm,o.W2,o.fr,o.Gu,o.gu,o.wd,o.sr,o.oU,U.X$],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: url(/assets/bg20.JPG) 0 0/100% 100% no-repeat;background-size:cover;background-color:#f0f8ff}.toolbar-backgorund[_ngcontent-%COMP%]{background-color:#f0f8ff;color:#000}.user-profile-pic[_ngcontent-%COMP%]{width:60px;height:60px;display:block;margin-top:20px;margin-left:auto;margin-right:auto;background-color:#f0f8ff}ion-note[_ngcontent-%COMP%]{display:inline-block;font-size:16px;background-color:#f0f8ff;color:#000}ion-item.selected[_ngcontent-%COMP%]{background-color:#f0f8ff;color:#000}ion-select[_ngcontent-%COMP%]{max-width:100%!important;width:100%!important;padding-left:0!important}ion-card[_ngcontent-%COMP%]{color:#2c1d1d;background-color:#f0f8ff;padding:0;margin:0;border-radius:10px}ion-card-content[_ngcontent-%COMP%]{background-color:#f0f8ff;color:#130d0d}.user-results[_ngcontent-%COMP%], .user-results-list-header[_ngcontent-%COMP%]{background-color:#f0f8ff}.user-result-cell[_ngcontent-%COMP%]{background-color:#7fffd4;margin-top:10px}.list-image[_ngcontent-%COMP%], .user-icon[_ngcontent-%COMP%]{font-size:50px;color:#1f0707}.value[_ngcontent-%COMP%]{font-size:larger;font-weight:600}.text-center[_ngcontent-%COMP%]{text-align:center;align-items:center}.bottom-area[_ngcontent-%COMP%]{position:fixed;left:0;bottom:0;right:0;background-color:gray;height:45px;margin-bottom:0}.bottom-button[_ngcontent-%COMP%]{border-width:1px;border-color:#3e2c2c;color:#fff;font-size:larger;font-weight:800;border-style:solid;width:50%;margin:5px auto auto}"]}),n})()}];let N=(()=>{var r;class n{}return(r=n).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[g.Bz.forChild(T),g.Bz]}),n})();var I=a(1383);let b=(()=>{var r;class n{}return(r=n).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[S.ez,m.u5,o.Pc,m.UX,N,I.m,U.aw.forChild()]}),n})()}}]);