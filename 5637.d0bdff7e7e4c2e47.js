"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5637],{5637:(I,c,i)=>{i.r(c),i.d(c,{ForgotPasswordPageModule:()=>f});var T=i(6814),d=i(6223),O=i(1383),A=i(9864),s=i(878),E=i(6800),g=i(5861),h=i(9421),S=i(7084),e=i(9212),m=i(7346),p=i(6530),v=i(643);const G=[{path:"",component:(()=>{var r;class l{constructor(t,a,o,n,_,P){this.alertController=t,this.loadingController=a,this.userService=o,this.languageService=n,this.navCtrl=_,this.loadingCtrl=P,this.userEmailValidationMessage="",this.userNameValidationMessage="",this.userEmail="",this.userName="",this.enableRequestButton=!1,this.allowClose=!1,this.localUser=new h.n(JSON.parse("{}")),this.userEmail="",this.userName=""}ionViewWillEnter(){}ngOnInit(){}userNameTextChanged(){this.validate()}emailTextChanged(){this.validate()}validate(){return this.validateEmail()&&this.validateUsername()?(this.enableRequestButton=!0,!0):(this.enableRequestButton=!1,!1)}validateUsername(){return null==this.userName||null==this.userName||0==this.userName.length?(this.userNameValidationMessage=this.languageService.translate("FORGOT_PASSWORD_PAGE.USER_NAME_SYNTAX_VALIDATING_MESSAGE"),!1):(this.userNameValidationMessage="",!0)}validateEmail(){var t=S.W.validateEmail(this.userEmail);return this.userEmailValidationMessage=this.userEmail.length>0&&!t?this.languageService.translate("FORGOT_PASSWORD_PAGE.EMAIL_SYNTAX_VALIDATING_MESSAGE"):"",t}RequestPasswordButtonClicked(){var t=this;return(0,g.Z)(function*(){const a=yield t.loadingCtrl.create({message:t.languageService.translate("FORGOT_PASSWORD_PAGE.VALIDATING_MESSAGE"),duration:3e3});a.present(),t.userService.getUserByUserNameEmail(t.userName,t.userEmail,function(){var o=(0,g.Z)(function*(n){null==n||0===n.results.length?(a.dismiss(),t.presentAlert(t.languageService.translate("FORGOT_PASSWORD_PAGE.EMAIL_NOT_SENT_TITLE"),t.languageService.translate("FORGOT_PASSWORD_PAGE.INVALID_DETAILS_MESSAGE"))):(a.dismiss(),t.localUser=n.result[0],yield t.updateUserCredentials())});return function(n){return o.apply(this,arguments)}}(),()=>{t.presentAlert("FORGOT_PASSWORD_PAGE.EMAIL_NOT_SENT_TITLE","FORGOT_PASSWORD_PAGE.VALIDATION_FAILED_MESSAGE")})})()}updateUserCredentials(){var t=this;return(0,g.Z)(function*(){const a=yield t.loadingCtrl.create({message:t.languageService.translate("FORGOT_PASSWORD_PAGE.GENERATING_TEMP_PASSWORD"),duration:3e3});a.present(),t.localUser.password=S.W.generateTempPassowrd(),t.userService.UpdateUserCredentials(t.localUser,function(){var o=(0,g.Z)(function*(n){null==n?(a.dismiss(),t.presentAlert(t.languageService.translate("FORGOT_PASSWORD_PAGE.EMAIL_NOT_SENT_TITLE"),t.languageService.translate("FORGOT_PASSWORD_PAGE.INVALID_DETAILS_MESSAGE"))):(a.dismiss(),t.sendEmail())});return function(n){return o.apply(this,arguments)}}(),()=>{t.presentAlert(t.languageService.translate("FORGOT_PASSWORD_PAGE.EMAIL_NOT_SENT_TITLE"),t.languageService.translate("FORGOT_PASSWORD_PAGE.VALIDATION_FAILED_MESSAGE"))})})()}sendEmail(){var t=this;return(0,g.Z)(function*(){var a;t.loading=yield t.loadingController.create({message:t.languageService.translate("FORGOT_PASSWORD_PAGE.EMAIL_SENDING_MESSAGE"),duration:2e3}),t.loading.present(),t.userService.sendForgotPasswordEmail(t.localUser.name,t.localUser.userName,t.localUser.email,null!==(a=t.localUser.password)&&void 0!==a?a:"",function(){var o=(0,g.Z)(function*(n){"sent"===n?t.presentAlert(t.languageService.translate("FORGOT_PASSWORD_PAGE.EMAIL_SENT_TITLE"),t.languageService.translate("FORGOT_PASSWORD_PAGE.EMAIL_SENT_MESSAGE")):t.presentAlert(t.languageService.translate("FORGOT_PASSWORD_PAGE.EMAIL_NOT_SENT_TITLE"),t.languageService.translate("FORGOT_PASSWORD_PAGE.EMAIL_EXHAUSTED")),t.allowClose=!0});return function(n){return o.apply(this,arguments)}}(),()=>{t.allowClose=!1,t.presentAlert(t.languageService.translate("FORGOT_PASSWORD_PAGE.VALIDATION_FAILED_MESSAGE"),t.languageService.translate("FORGOT_PASSWORD_PAGE.VALIDATION_FAILED_MESSAGE"))})})()}goToLogin(){this.navCtrl.navigateRoot("/")}presentAlert(t=this.languageService.translate("FORGOT_PASSWORD_PAGE.VALIDATION_FAILED_TITLE"),a=this.languageService.translate("LOGIN.ERROR_INVALID_CREDENTIALS_MESSAGE")){var o=this;return(0,g.Z)(function*(){const n=yield o.alertController.create({cssClass:"my-custom-class",header:t,subHeader:"",message:a,buttons:[{text:o.languageService.translate("BUTTONS.OK"),handler:P=>{if(o.allowClose){let R={queryParams:{ts:(new Date).getMilliseconds()}};o.navCtrl.navigateRoot("/login",R)}}}]});yield n.present(),yield n.onDidDismiss()})()}}return(r=l).\u0275fac=function(t){return new(t||r)(e.Y36(s.Br),e.Y36(s.HT),e.Y36(p.K),e.Y36(v.T),e.Y36(m.SH),e.Y36(s.HT))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-forgot-password"]],decls:42,vars:25,consts:[["id","TitleToolbar",1,"text-center"],["slot","start"],["padding","",1,"login","auth-page"],["padding-horizontal","","text-center","",1,"animated","fadeInDown"],[1,"app-logo","center"],["src","/assets/icon/org-logo.png"],["no-margin","",1,"text-center"],["color","dark",1,"ion-text-justify"],[1,"auth-content"],["id","UserProfile"],["name","mail","slot","start"],["name","Email",3,"ngModel","placeholder","ionChange","ngModelChange"],["name","","slot","end"],["ion-text","",1,"text08"],["color","error"],["name","person","slot","start"],["margin-top",""],["size","medium","expand","full","shape","round","color","dark",3,"disabled","click"],[1,"text-center","language-button"],[1,"paz",3,"click"],["color","dark"]],template:function(t,a){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"ion-content",2)(8,"div",3)(9,"div",4),e._UZ(10,"img",5),e.qZA(),e.TgZ(11,"h4",6)(12,"ion-text",7),e._uU(13),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"h5",6)(16,"ion-text",7),e._uU(17),e.ALo(18,"translate"),e.qZA()()(),e.TgZ(19,"div",8)(20,"ion-item",9),e._UZ(21,"ion-icon",10),e.TgZ(22,"ion-input",11),e.NdJ("ionChange",function(){return a.emailTextChanged()})("ngModelChange",function(n){return a.userEmail=n}),e.ALo(23,"translate"),e.qZA(),e._UZ(24,"ion-icon",12),e.qZA(),e.TgZ(25,"p",13)(26,"ion-text",14),e._uU(27),e.qZA()(),e.TgZ(28,"ion-item",9),e._UZ(29,"ion-icon",15),e.TgZ(30,"ion-input",11),e.NdJ("ionChange",function(){return a.userNameTextChanged()})("ngModelChange",function(n){return a.userName=n}),e.ALo(31,"translate"),e.qZA(),e._UZ(32,"ion-icon",12),e.qZA(),e.TgZ(33,"div",16)(34,"ion-button",17),e.NdJ("click",function(){return a.RequestPasswordButtonClicked()}),e._uU(35),e.ALo(36,"translate"),e.qZA()()(),e.TgZ(37,"div",18)(38,"span",19),e.NdJ("click",function(){return a.goToLogin()}),e.TgZ(39,"ion-text",20),e._uU(40),e.ALo(41,"translate"),e.qZA()()()()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,11,"FORGOT_PASSWORD_PAGE.PAGE_TITLE")),e.xp6(8),e.hij(" ",e.lcZ(14,13,"APP_TITLE")," "),e.xp6(4),e.hij(" ",e.lcZ(18,15,"APP_SUB_TITLE")," "),e.xp6(5),e.MGl("placeholder"," ",e.lcZ(23,17,"GENERAL.EMAIL_FIELD"),""),e.Q6J("ngModel",a.userEmail),e.xp6(5),e.hij(" ",a.userEmailValidationMessage," "),e.xp6(3),e.MGl("placeholder"," ",e.lcZ(31,19,"GENERAL.USERNAME_FIELD"),""),e.Q6J("ngModel",a.userName),e.xp6(4),e.Q6J("disabled",!a.enableRequestButton),e.xp6(),e.hij(" ",e.lcZ(36,21,"FORGOT_PASSWORD_PAGE.REQUEST_PASSWORDE_BUTTON_TITLE")," "),e.xp6(5),e.hij(" ",e.lcZ(41,23,"BUTTONS.CLOSE")," "))},dependencies:[d.JJ,d.On,s.YG,s.Sm,s.W2,s.Gu,s.gu,s.pK,s.Ie,s.yW,s.wd,s.sr,s.j9,s.oU,A.X$],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: url(/assets/bg20.JPG) 0 0/100% 100% no-repeat ;background-size:cover}#TitleToolbar[_ngcontent-%COMP%]{color:#000}ion-item[_ngcontent-%COMP%], ion-button[_ngcontent-%COMP%], ion-icon[_ngcontent-%COMP%]{color:#000;margin-top:20px}button[_ngcontent-%COMP%]{color:#000}.forgotLinks[_ngcontent-%COMP%]{margin-top:10px}.signin[_ngcontent-%COMP%]{margin-top:50px}.app-logo[_ngcontent-%COMP%]{width:60px;height:60px;display:block;margin-top:20px;margin-left:auto;margin-right:auto}.paz[_ngcontent-%COMP%]{position:relative;z-index:10}.text-center[_ngcontent-%COMP%]{text-align:center}.text-left[_ngcontent-%COMP%]{text-align:left}.text-right[_ngcontent-%COMP%]{text-align:right}.left[_ngcontent-%COMP%]{float:left;text-align:left;padding-right:10px}.right[_ngcontent-%COMP%]{float:right;text-align:right;padding-left:10px}.language-button[_ngcontent-%COMP%]{position:fixed;left:0;bottom:10px;right:0}"]}),l})()}];let M=(()=>{var r;class l{}return(r=l).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[E.Bz.forChild(G),E.Bz]}),l})(),f=(()=>{var r;class l{}return(r=l).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[T.ez,d.u5,s.Pc,d.UX,M,O.m,A.aw.forChild()]}),l})()}}]);